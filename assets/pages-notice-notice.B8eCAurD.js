import{b as e,I as a,z as l,K as s,O as t,P as u,L as o,M as n,d as i,o as c,c as r,w as d,i as v,a as p,e as m,f,F as h,p as g,Q as y,R as _,l as b,T as V,k as w}from"./index-Dwkfn6N4.js";import{_ as C}from"./uni-icons.CrRnq76I.js";import{_ as k,b as x,r as I}from"./uni-app.es.DXZfXWLd.js";const A=k({__name:"notice",setup(k){const A=e(""),P=e(""),F=e(""),U=e(""),j=e(""),M=e("arrow-up"),T=e([]),z=e(0),B=e(0);x((e=>{let s=a();switch(B.value=s.safeAreaInsets.bottom,z.value=B.value,P.value=Number(e.id),e.name&&l({title:e.name}),P.value){case 0:return R();case 1:default:return L();case 2:return K();case 3:return S()}}));const R=()=>{s({title:"加载中"}),t({url:"https://api.lolimi.cn/API/dmt/api.php"}).then((e=>{200===e.statusCode?(A.value=e.data.text,console.log(A),u((()=>{o()}))):o()}))},L=()=>{s({title:"加载中"}),t({url:"https://api.lolimi.cn/API/meinv/api.php"}).then((e=>{200===e.statusCode?(A.value=e.data.data.image,u((()=>{o()}))):o()}))},S=()=>{F.value&&"more"!==M.value&&(M.value="more",t({url:"https://api.lolimi.cn/API/sgst/api.php?msg="+F.value}).then((e=>{200===e.statusCode?(A.value=e.data.data.url,M.value="arrow-up"):M.value="arrow-up"})))},K=()=>{if(!F.value||"more"===M.value)return;const e=F.value;M.value="more",t({url:"https://api.lolimi.cn/API/AI/mfcat3.5.php?msg="+F.value}).then((a=>{200===a.statusCode?(j.value=a.data,T.value.push({user:e,ai:j.value}),F.value="",M.value="arrow-up",u((()=>{U.value+=9999}))):(n({title:a.errMsg+",模型接口错误,请切换模型重试",icon:"none"}),M.value="arrow-up")})).catch((()=>{M.value="arrow-up"}))},N=()=>{y({url:A.value,success:e=>{200===e.statusCode?_({filePath:e.tempFilePath,success:()=>{console.log("save success"),n({title:"保存成功",icon:"success"})},fail:e=>{console.log("save fail",e),n({title:"保存失败",icon:"none"})}}):(console.log("download fail",e),n({title:"下载失败",icon:"none"}))},fail:e=>{console.log("download fail",e),n({title:"下载失败",icon:"none"})}})},O=e=>{e.detail.height?z.value=e.detail.height:z.value=B.value},Q=()=>{z.value=B.value};return(e,a)=>{const l=b,s=v,t=V,u=I(i("uni-icons"),C),o=w;return c(),r(s,{class:"noticeLayout"},{default:d((()=>[0===P.value||1===P.value?(c(),r(s,{key:0,class:"imageBox"},{default:d((()=>[p(l,{src:A.value,onClick:N,mode:"widthFix"},null,8,["src"])])),_:1})):2===P.value?(c(),r(o,{key:1,class:"scroll-area","scroll-y":"true","scroll-with-animation":"true","scroll-top":U.value},{default:d((()=>[p(s,{class:"aiChat"},{default:d((()=>[p(s,{class:"chatAnswer"},{default:d((()=>[(c(!0),m(h,null,f(T.value,((e,a)=>(c(),r(s,{class:"chat",key:a},{default:d((()=>[p(t,{disabled:"","auto-height":"",class:"userMessage",modelValue:e.user,"onUpdate:modelValue":a=>e.user=a},null,8,["modelValue","onUpdate:modelValue"]),p(t,{disabled:"","auto-height":"",class:"aiMessage",modelValue:e.ai,"onUpdate:modelValue":a=>e.ai=a},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)))),128))])),_:1}),p(s,{class:"chatText",style:g({bottom:z.value+"px"})},{default:d((()=>[p(t,{"adjust-position":!1,onFocus:O,onBlur:Q,"auto-height":"",modelValue:F.value,"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),placeholder:"输入内容开始聊天吧"},null,8,["modelValue"]),p(s,{class:"btn",onClick:a[1]||(a[1]=e=>F.value?K():"")},{default:d((()=>[p(u,{class:"iconSend",type:M.value,size:"26",style:g({backgroundColor:F.value?"#ffffff":"#676767",borderRadius:"50%"})},null,8,["type","style"])])),_:1})])),_:1},8,["style"])])),_:1})])),_:1},8,["scroll-top"])):(c(),r(s,{key:2,class:"huaTu"},{default:d((()=>[p(s,{class:"tuText",style:g({bottom:z.value+"px"})},{default:d((()=>[p(t,{"adjust-position":!1,onFocus:O,onBlur:Q,"auto-height":"",modelValue:F.value,"onUpdate:modelValue":a[2]||(a[2]=e=>F.value=e),placeholder:"输入搜索内容"},null,8,["modelValue"]),p(s,{class:"btn",onClick:a[3]||(a[3]=e=>F.value?S():"")},{default:d((()=>[p(u,{class:"iconSend",type:M.value,size:"26",style:g({backgroundColor:F.value?"#ffffff":"#676767",borderRadius:"50%"})},null,8,["type","style"])])),_:1})])),_:1},8,["style"]),p(l,{src:A.value,mode:"aspectFill"},null,8,["src"])])),_:1}))])),_:1})}}},[["__scopeId","data-v-a09b9d96"]]);export{A as default};
